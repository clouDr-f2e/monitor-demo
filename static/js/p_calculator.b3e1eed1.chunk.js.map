{"version":3,"sources":["components/PageHeader/index.js","hoc/baseContent.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","utils/math.js","utils/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","constants/metrics.js","pages/calculator/components/MetricsTable.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","pages/calculator/components/Editor.js","pages/calculator/index.js"],"names":["PageHeader","title","className","type","withBaseContent","Component","props","module","exports","QUANTILE_AT_VALUE","value","median","podr","p10","derivePodrFromP10","location","Math","log","logRatio","shape","sqrt","x","sign","t","abs","exp","internalErf_","SQRT2","VALUE_AT_QUANTILE","quantile","log1x","p1","PI","sqrtP1Log","internalErfInv_","u","inner1","ua","navigator","userAgent","isWindowsPhone","test","isSymbian","isAndroid","isFireFox","isTablet","isPhone","determineMinMax","metricScoring","valueAtScore100","valueAtScore5","min","floor","max","ceil","step","units","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_objectWithoutProperties","source","excluded","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","metricsMap","fcp","act","ccp","EditableContext","React","createContext","columns","dataIndex","render","text","width","editable","EditableRow","index","useForm","form","component","Provider","EditableCell","children","record","handleSave","restProps","useState","editing","setEditing","inputRef","useRef","useContext","useEffect","current","focus","toggleEdit","setFieldsValue","save","fn","a","validateFields","values","console","self","this","args","arguments","apply","err","undefined","childNode","Item","style","margin","name","rules","required","message","ref","onPressEnter","onBlur","paddingRight","onClick","MetricsTable","metricsConfig","onMetricsChange","dataSource","useMemo","entries","map","k","v","metrics","adaptColumns","col","onCell","weight","pagination","bordered","rowClassName","components","body","row","cell","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","Editor","metricsData","onScoreChange","onValueChange","weightMax","m","data","onInput","e","valueAsNumber","toLocaleString","score","align","Content","setMetricsData","setMetrics","useCallback","val","round","computedValue","preState","href","rel"],"mappings":"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","file":"static/js/p_calculator.b3e1eed1.chunk.js","sourcesContent":["import { Divider } from 'antd'\n\nfunction PageHeader({ title }) {\n    return (\n        <>\n            <div className='text-3xl font-semibold'>{title}</div>\n            <Divider type='horizontal' />\n        </>\n    )\n}\n\nexport default PageHeader\n","const withBaseContent = (Component) => {\n    return (props) => (\n        <div className='flex-1 p-5 overflow-auto'>\n            <Component {...props} />\n        </div>\n    )\n}\n\nexport default withBaseContent\n","module.exports = require(\"regenerator-runtime\");\n","/**\n * Approximates the Gauss error function, the probability that a random variable\n * from the standard normal distribution lies within [-x, x]. Moved from\n * traceviewer.b.math.erf, based on Abramowitz and Stegun, formula 7.1.26.\n * @param {number} x\n * @return {number}\n */\nfunction internalErf_(x) {\n    // erf(-x) = -erf(x);\n    const sign = x < 0 ? -1 : 1\n    x = Math.abs(x)\n\n    const a1 = 0.254829592\n    const a2 = -0.284496736\n    const a3 = 1.421413741\n    const a4 = -1.453152027\n    const a5 = 1.061405429\n    const p = 0.3275911\n    const t = 1 / (1 + p * x)\n    const y = t * (a1 + t * (a2 + t * (a3 + t * (a4 + t * a5))))\n    return sign * (1 - y * Math.exp(-x * x))\n}\n\n/**\n * Creates a log-normal distribution and finds the complementary\n * quantile (1-percentile) of that distribution at value. All\n * arguments should be in the same units (e.g. milliseconds).\n *\n * @param {{median: number, podr?: number, p10?: number}} curve\n * @param {number} value\n * @return The complement of the quantile at value.\n * @customization\n */\nexport function QUANTILE_AT_VALUE({ median, podr, p10 }, value) {\n    if (!podr) {\n        podr = derivePodrFromP10(median, p10)\n    }\n\n    const location = Math.log(median)\n\n    // The \"podr\" value specified the location of the smaller of the positive\n    // roots of the third derivative of the log-normal CDF. Calculate the shape\n    // parameter in terms of that value and the median.\n    // See https://www.desmos.com/calculator/2t1ugwykrl\n    const logRatio = Math.log(podr / median)\n    const shape = Math.sqrt(1 - 3 * logRatio - Math.sqrt((logRatio - 3) * (logRatio - 3) - 8)) / 2\n\n    const standardizedX = (Math.log(value) - location) / (Math.SQRT2 * shape)\n    return (1 - internalErf_(standardizedX)) / 2\n}\n\n/**\n * Approximates the inverse error function. Based on Winitzki, \"A handy\n * approximation for the error function and its inverse\"\n * @param {number} x\n * @return {number}\n */\nfunction internalErfInv_(x) {\n    // erfinv(-x) = -erfinv(x);\n    const sign = x < 0 ? -1 : 1\n    const a = 0.147\n\n    const log1x = Math.log(1 - x * x)\n    const p1 = 2 / (Math.PI * a) + log1x / 2\n    const sqrtP1Log = Math.sqrt(p1 * p1 - log1x / a)\n    return sign * Math.sqrt(sqrtP1Log - p1)\n}\n\n/**\n * Calculates the value at the given quantile. Median, podr, and\n * expected value should all be in the same units (e.g. milliseconds).\n * quantile should be within [0,1].\n *\n * @param {{median: number, podr?: number, p10?: number}} curve\n * @return The value at this quantile.\n * @customization\n * @param quantile\n */\nexport function VALUE_AT_QUANTILE({ median, podr, p10 }, quantile) {\n    if (!podr) {\n        podr = derivePodrFromP10(median, p10)\n    }\n\n    const location = Math.log(median)\n    const logRatio = Math.log(podr / median)\n    const shape = Math.sqrt(1 - 3 * logRatio - Math.sqrt((logRatio - 3) * (logRatio - 3) - 8)) / 2\n\n    return Math.exp(location + shape * Math.SQRT2 * internalErfInv_(1 - 2 * quantile))\n}\n\n// https://www.desmos.com/calculator/oqlvmezbze\nfunction derivePodrFromP10(median, p10) {\n    const u = Math.log(median)\n    const shape = Math.abs(Math.log(p10) - u) / (Math.SQRT2 * 0.9061938024368232)\n    const inner1 = -3 * shape - Math.sqrt(4 + shape * shape)\n    return Math.exp(u + (shape / 2) * inner1)\n}\n","import { VALUE_AT_QUANTILE } from './math'\n\nconst os = (function () {\n    const ua = navigator.userAgent\n\n    const isWindowsPhone = /(?:Windows Phone)/.test(ua),\n        isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone,\n        isAndroid = /(?:Android)/.test(ua),\n        isFireFox = /(?:Firefox)/.test(ua),\n        isTablet =\n            /(?:iPad|PlayBook)/.test(ua) ||\n            (isAndroid && !/(?:Mobile)/.test(ua)) ||\n            (isFireFox && /(?:Tablet)/.test(ua)),\n        isPhone = /(?:iPhone)/.test(ua) && !isTablet,\n        isPc = !isPhone && !isAndroid && !isSymbian\n    return {\n        isTablet: isTablet,\n        isPhone: isPhone,\n        isAndroid: isAndroid,\n        isPc: isPc,\n    }\n})()\n\nfunction determineMinMax(metricScoring) {\n    const valueAtScore100 = VALUE_AT_QUANTILE(metricScoring, 0.995)\n    const valueAtScore5 = VALUE_AT_QUANTILE(metricScoring, 0.05)\n\n    let min = Math.floor(valueAtScore100 / 1000) * 1000\n    let max = Math.ceil(valueAtScore5 / 1000) * 1000\n    let step = 10\n\n    // Special handling for CLS\n    if (metricScoring.units === 'unitless') {\n        min = 0\n        max = Math.ceil(valueAtScore5 * 100) / 100\n        step = 0.01\n    }\n\n    return {\n        min,\n        max,\n        step,\n    }\n}\n\nexport { os, determineMinMax }\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","const metricsMap = {\n    fcp: 'first-contentful-paint',\n    act: 'api-complete-time',\n    ccp: 'custom-contentful-paint',\n}\n\nexport default metricsMap\n","import React, { useContext, useEffect, useMemo, useRef, useState } from 'react'\nimport { Table, Form, Input } from 'antd'\nimport metricsMap from 'src/constants/metrics'\n\nconst EditableContext = React.createContext(null)\n\nconst columns = [\n    {\n        title: 'metrics',\n        dataIndex: 'metrics',\n        key: 'metrics',\n        render: (text) => <div>{`${metricsMap[text]}（${text}）`}</div>,\n    },\n    { title: 'median(ms)', dataIndex: 'median', key: 'median', width: '20%', editable: true },\n    { title: 'p10(ms)', dataIndex: 'p10', key: 'p10', width: '20%', editable: true },\n    { title: 'weight', dataIndex: 'weight', key: 'weight', width: '20%', editable: true },\n]\n\nfunction EditableRow({ index, ...props }) {\n    const [form] = Form.useForm()\n\n    return (\n        <Form form={form} component={false}>\n            <EditableContext.Provider value={form}>\n                <tr {...props} />\n            </EditableContext.Provider>\n        </Form>\n    )\n}\n\nfunction EditableCell({ title, editable, children, dataIndex, record, handleSave, ...restProps }) {\n    const [editing, setEditing] = useState(false)\n    const inputRef = useRef(null)\n    const form = useContext(EditableContext)\n    useEffect(() => {\n        if (editing) {\n            inputRef.current.focus()\n        }\n    }, [editing])\n\n    const toggleEdit = () => {\n        setEditing(!editing)\n        form.setFieldsValue({\n            [dataIndex]: record[dataIndex],\n        })\n    }\n\n    const save = async () => {\n        try {\n            const values = await form.validateFields()\n            toggleEdit()\n            handleSave({ ...record, ...values, ...restProps })\n        } catch (errInfo) {\n            console.log('Save failed:', errInfo)\n        }\n    }\n\n    let childNode = children\n\n    if (editable) {\n        childNode = editing ? (\n            <Form.Item\n                style={{\n                    margin: 0,\n                }}\n                name={dataIndex}\n                rules={[\n                    {\n                        required: true,\n                        message: `${title} is required.`,\n                    },\n                ]}\n            >\n                <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n            </Form.Item>\n        ) : (\n            <div\n                className='editable-cell-value-wrap'\n                style={{\n                    paddingRight: 24,\n                }}\n                onClick={toggleEdit}\n            >\n                {children}\n            </div>\n        )\n    }\n\n    return <td {...restProps}>{childNode}</td>\n}\n\nfunction MetricsTable({ metricsConfig, onMetricsChange }) {\n    const dataSource = useMemo(() => {\n        return Object.entries(metricsConfig).map(([k, v]) => ({ metrics: k, ...v, key: k }))\n    }, [metricsConfig])\n\n    const adaptColumns = useMemo(() => {\n        return columns.map((col, i) => {\n            if (!col.editable) {\n                return { ...col, key: i }\n            }\n            return {\n                ...col,\n                key: i,\n                onCell: (record) => ({\n                    record,\n                    editable: col.editable,\n                    dataIndex: col.dataIndex,\n                    title: col.title,\n                    index: i,\n                    handleSave: ({ key, weight, median, p10 }) => {\n                        onMetricsChange({ [key]: { weight, median, p10 } })\n                    },\n                }),\n            }\n        })\n    }, [onMetricsChange])\n\n    return (\n        <Table\n            pagination={false}\n            bordered\n            rowClassName={() => 'editable-row'}\n            components={{\n                body: {\n                    row: EditableRow,\n                    cell: EditableCell,\n                },\n            }}\n            columns={adaptColumns}\n            dataSource={dataSource}\n        />\n    )\n}\n\nexport default MetricsTable\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { useMemo } from 'react'\nimport { Table } from 'antd'\nimport { determineMinMax } from 'src/utils'\nimport metricsMap from 'src/constants/metrics'\n\nfunction Editor({ metricsData = [], onScoreChange, onValueChange }) {\n    const dataSource = useMemo(() => {\n        const weightMax = Math.max(...metricsData.map((m) => m.metricScoring.weight))\n        return metricsData.map((data, i) => ({ ...data, weightMax, key: i }))\n    }, [metricsData])\n\n    const columns = useMemo(\n        () => [\n            {\n                title: 'metrics',\n                dataIndex: 'metrics',\n                key: 'metrics',\n                render: (text, record) => <div>{`${metricsMap[record.name]}（${record.name}）`}</div>,\n            },\n            {\n                title: 'Value',\n                dataIndex: 'value',\n                key: 'value',\n                render: (text, { name, metricScoring, value }) => {\n                    const { min, max, step } = determineMinMax(metricScoring)\n\n                    return (\n                        <div className='flex flex-col'>\n                            <input\n                                type='range'\n                                min={min}\n                                value={value}\n                                max={max}\n                                step={step}\n                                className=''\n                                onInput={(e) => onValueChange(name, e.target?.valueAsNumber)}\n                            />\n                            <output className='text-right'>{`${value.toLocaleString()}ms`}</output>\n                        </div>\n                    )\n                },\n            },\n            {\n                title: 'Metric Score',\n                dataIndex: 'score',\n                key: 'score',\n                render: (text, { name, metricScoring, score, weightMax }) => {\n                    return (\n                        <div className='flex flex-col items-end'>\n                            <input\n                                type='range'\n                                style={{ width: `${(metricScoring.weight / weightMax) * 100}%` }}\n                                value={score}\n                                onInput={(e) => onScoreChange(name, e.target?.valueAsNumber)}\n                            />\n                            <output className='text-right'>{score}</output>\n                        </div>\n                    )\n                },\n            },\n            {\n                title: 'Weighting',\n                dataIndex: 'weight',\n                key: 'weight',\n                align: 'right',\n                render: (text, { metricScoring }) => <span>{metricScoring.weight * 100}%</span>,\n            },\n        ],\n        [onScoreChange, onValueChange]\n    )\n\n    return <Table pagination={false} columns={columns} dataSource={dataSource} />\n}\n\nexport default Editor\n","import './index.less'\nimport { useState, useEffect, useCallback } from 'react'\nimport { Layout, Divider } from 'antd'\nimport PageHeader from 'src/components/PageHeader'\nimport withBaseContent from 'src/hoc/baseContent'\nimport metricsConfig from 'src/constants/performance'\nimport { QUANTILE_AT_VALUE, VALUE_AT_QUANTILE } from 'src/utils/math'\nimport { determineMinMax } from 'src/utils'\nimport MetricsTable from './components/MetricsTable'\nimport Editor from './components/Editor'\n\nconst { Content } = Layout\n\nfunction Calculator() {\n    const [metricsData, setMetricsData] = useState([])\n\n    const [metrics, setMetrics] = useState(metricsConfig)\n\n    const onValueChange = useCallback(\n        (name, val) => {\n            const data = metricsData.map((metrics) => {\n                if (metrics.name === name) {\n                    return {\n                        ...metrics,\n                        value: val,\n                        score: Math.round(QUANTILE_AT_VALUE(metrics.metricScoring, val) * 100),\n                    }\n                }\n\n                return metrics\n            })\n\n            setMetricsData(data)\n        },\n        [metricsData]\n    )\n\n    const onScoreChange = useCallback(\n        (name, score) => {\n            const data = metricsData.map((metrics) => {\n                if (metrics.name === name) {\n                    const { min, max } = determineMinMax(metrics.metricScoring)\n                    let computedValue = VALUE_AT_QUANTILE(metrics.metricScoring, score / 100)\n                    computedValue = Math.max(Math.min(computedValue, max), min)\n\n                    return {\n                        ...metrics,\n                        value: Math.round(computedValue),\n                        score: score,\n                    }\n                }\n\n                return metrics\n            })\n\n            setMetricsData(data)\n        },\n        [metricsData]\n    )\n\n    const onMetricsChange = useCallback((metrics) => {\n        setMetrics((preState) => {\n            return {\n                ...preState,\n                ...metrics,\n            }\n        })\n    }, [])\n\n    useEffect(() => {\n        const data = Object.entries(metrics).map(([key, value]) => {\n            return {\n                name: key,\n                metricScoring: value,\n                value: value.median,\n                score: Math.round(QUANTILE_AT_VALUE(value, value.median) * 100),\n            }\n        })\n        setMetricsData(data)\n    }, [metrics])\n\n    return (\n        <Content>\n            <PageHeader title='Calculator' />\n            <Content>\n                <div className='mb-5 underline text-2xl'>\n                    <a href='https://www.desmos.com/calculator/oqlvmezbze?lang=zh-CN' target='_blank' rel='noreferrer'>\n                        computational formula\n                    </a>\n                </div>\n                <MetricsTable metricsConfig={metrics} onMetricsChange={onMetricsChange} />\n                <Divider />\n                <Editor metricsData={metricsData} onScoreChange={onScoreChange} onValueChange={onValueChange} />\n            </Content>\n        </Content>\n    )\n}\n\nexport default withBaseContent(Calculator)\n"],"sourceRoot":""}