{"version":3,"sources":["components/PageHeader/index.js","hoc/baseContent.js","utils/request.js","assets/images/img.png","pages/performance/index.js"],"names":["PageHeader","title","className","type","withBaseContent","Component","props","service","axios","create","request","get","url","config","post","data","Content","columns","dataIndex","connect","scores","performance","useState","placeholderImg","setData","useForm","form","remoteSource","useCallback","imageProtocol","getFieldValue","imageExt","Date","then","Object","entries","reduce","o","key","value","onValuesChange","changedValues","allValues","useEffect","layout","initialValues","imageLazyLoad","Item","label","name","valuePropName","checkedChildren","unCheckedChildren","pagination","dataSource","bordered","summary","pageData","total","sum","score","weight","Summary","Row","Cell","colSpan","toFixed","preview","src","alt"],"mappings":"yJAWeA,IATf,YAAgC,IAAVC,EAAS,EAATA,MAClB,OACI,qCACI,qBAAKC,UAAU,yBAAf,SAAyCD,IACzC,mBAASE,KAAK,oB,qDCEXC,IARS,SAACC,GACrB,OAAO,SAACC,GAAD,OACH,qBAAKJ,UAAU,2BAAf,SACI,cAACG,EAAD,eAAeC,S,iCCH3B,aAEMC,EAFN,OAEgBC,EAAMC,SAEhBC,EAAU,CACZC,IADY,SACRC,EAAKC,GACL,OAAON,EAAQI,IAAIC,EAAKC,IAE5BC,KAJY,SAIPF,EAAKG,EAAMF,GACZ,OAAON,EAAQO,KAAKF,EAAKG,EAAMF,KAIxBH,O,mPCbA,MAA0B,gC,QCQjCM,EAAR,IAAQA,QAEFC,EAAU,CACZ,CACIhB,MAAO,QACPiB,UAAW,SAEf,CACIjB,MAAO,QACPiB,UAAW,SAEf,CACIjB,MAAO,QACPiB,UAAW,SAEf,CACIjB,MAAO,SACPiB,UAAW,WA8GJC,uBAAQ,YAEnB,MAAO,CACHC,OAHoC,EAAlBC,YACdD,UADGD,CAKZf,aA/GH,YAAkC,IAAXgB,EAAU,EAAVA,OACnB,EAAwBE,mBAAS,CAC7B,cAAeC,EACf,iBAAkBA,EAClB,UAAWA,EACX,UAAWA,IAJf,mBAAOR,EAAP,KAAaS,EAAb,KAOA,EAAe,IAAKC,UAAbC,EAAP,oBAEMC,EAAeC,uBAAY,WAC7B,IAAMC,EAAgBH,EAAKI,cAAc,iBACnCC,EAAWL,EAAKI,cAAc,YAE9BlB,EAAMiB,EAAgB,0BAA4B,+BACxDnB,IAAQC,IAAR,UAAeC,EAAf,eAAyB,IAAIoB,OAAUC,MAAK,YAAe,IAAZlB,EAAW,EAAXA,KACtCgB,IACDhB,EAAOmB,OAAOC,QAAQpB,GAAMqB,QAAO,SAACC,EAAD,GAAsB,IAAD,mBAAhBC,EAAgB,KAAXC,EAAW,KACpD,OAAO,2BAAKF,GAAZ,kBAAgBC,EAAhB,UAAyBC,EAAzB,wCACD,KAEPf,EAAQT,QAEb,CAACW,IAEEc,EAAiBZ,uBACnB,SAACa,EAAeC,GACZf,MAEJ,CAACA,IAOL,OAJAgB,qBAAU,WACNhB,MACD,CAACA,IAGA,eAACX,EAAD,CAASd,UAAU,gBAAnB,UACI,cAACF,EAAA,EAAD,CAAYC,MAAM,gBAClB,eAACe,EAAD,WACI,0BAASd,UAAU,qBAAnB,UACI,oBAAIA,UAAU,8BAAd,uBACA,oBACIwB,KAAMA,EACNkB,OAAO,SACPJ,eAAgBA,EAChBK,cAAe,CACXhB,eAAe,EACfE,UAAU,EACVe,eAAe,GAPvB,UAUI,kBAAMC,KAAN,CAAWC,MAAM,2BAAOC,KAAK,gBAAgBC,cAAc,UAA3D,SACI,mBAAQC,gBAAgB,QAAQC,kBAAkB,WAEtD,kBAAML,KAAN,CAAWC,MAAM,2BAAOC,KAAK,WAAWC,cAAc,UAAtD,SACI,mBAAQC,gBAAgB,MAAMC,kBAAkB,WAEpD,kBAAML,KAAN,CAAWC,MAAM,2BAAOC,KAAK,gBAAgBC,cAAc,UAA3D,SACI,mBAAQC,gBAAgB,SAAIC,kBAAkB,mBAI1D,0BAASlD,UAAU,qBAAnB,UACI,oBAAIA,UAAU,8BAAd,gCACA,mBACImD,YAAY,EACZpC,QAASA,EACTqC,WAAYlC,EACZmC,UAAQ,EACRC,QAAS,SAACC,GACN,IAAMC,EAAQD,EAASrB,QAAO,SAACuB,EAAD,GAC1B,OAAOA,EAD+C,EAApBC,MAAoB,EAAbC,SAE1C,GACH,OACI,mCACI,mBAAOC,QAAQC,IAAf,WACI,kBAAOD,QAAQE,KAAf,oBACA,kBAAOF,QAAQE,KAAf,CAAoBC,QAAS,EAA7B,SAAiCP,EAAMQ,QAAQ,gBAOvE,0BAAShE,UAAU,qBAAnB,UACI,oBAAIA,UAAU,8BAAd,qCACA,mBAAOA,UAAU,cAAciE,SAAS,EAAOC,IAAKrD,EAAK,eAAgBsD,IAAI,QAEjF,0BAASnE,UAAU,qBAAnB,UACI,oBAAIA,UAAU,8BAAd,wBACA,mBAAOA,UAAU,SAASiE,SAAS,EAAOC,IAAKrD,EAAK,kBAAmBsD,IAAI,QAE/E,0BAASnE,UAAU,qBAAnB,UACI,oBAAIA,UAAU,8BAAd,oCACA,mBAAOA,UAAU,SAASiE,SAAS,EAAOC,IAAKrD,EAAK,WAAYsD,IAAI,QAExE,0BAASnE,UAAU,gBAAnB,UACI,oBAAIA,UAAU,8BAAd,sCACA,mBAAOA,UAAU,SAASiE,SAAS,EAAOC,IAAKrD,EAAK,WAAYsD,IAAI","file":"static/js/p_performance.14e29a6c.chunk.js","sourcesContent":["import { Divider } from 'antd'\n\nfunction PageHeader({ title }) {\n    return (\n        <>\n            <div className='text-3xl font-semibold'>{title}</div>\n            <Divider type='horizontal' />\n        </>\n    )\n}\n\nexport default PageHeader\n","const withBaseContent = (Component) => {\n    return (props) => (\n        <div className='flex-1 p-5 overflow-auto'>\n            <Component {...props} />\n        </div>\n    )\n}\n\nexport default withBaseContent\n","import axios from 'axios'\n\nconst service = axios.create()\n\nconst request = {\n    get(url, config) {\n        return service.get(url, config)\n    },\n    post(url, data, config) {\n        return service.post(url, data, config)\n    },\n}\n\nexport default request\n","export default __webpack_public_path__ + \"static/media/img.687dca16.png\";","import { useCallback, useEffect, useState } from 'react'\nimport { connect } from 'dva'\nimport { Layout, Image, Table, Form, Switch } from 'antd'\nimport PageHeader from 'src/components/PageHeader'\nimport withBaseContent from 'src/hoc/baseContent'\nimport request from 'src/utils/request'\nimport placeholderImg from 'src/assets/images/img.png'\n\nconst { Content } = Layout\n\nconst columns = [\n    {\n        title: 'Title',\n        dataIndex: 'title',\n    },\n    {\n        title: 'Score',\n        dataIndex: 'score',\n    },\n    {\n        title: 'Value',\n        dataIndex: 'value',\n    },\n    {\n        title: 'Weight',\n        dataIndex: 'weight',\n    },\n]\n\nfunction Performance({ scores }) {\n    const [data, setData] = useState({\n        'img-example': placeholderImg,\n        'img-navigation': placeholderImg,\n        'img-fcp': placeholderImg,\n        'img-lcp': placeholderImg,\n    })\n\n    const [form] = Form.useForm()\n\n    const remoteSource = useCallback(() => {\n        const imageProtocol = form.getFieldValue('imageProtocol')\n        const imageExt = form.getFieldValue('imageExt')\n        // const imageLazyLoad = form.getFieldValue('imageLazyLoad')\n        const url = imageProtocol ? './data/performance.json' : './data/performance-http.json'\n        request.get(`${url}?t=${+new Date()}`).then(({ data }) => {\n            if (!imageExt) {\n                data = Object.entries(data).reduce((o, [key, value]) => {\n                    return { ...o, [key]: `${value}?x-oss-process=image/format,webp` }\n                }, {})\n            }\n            setData(data)\n        })\n    }, [form])\n\n    const onValuesChange = useCallback(\n        (changedValues, allValues) => {\n            remoteSource()\n        },\n        [remoteSource]\n    )\n\n    useEffect(() => {\n        remoteSource()\n    }, [remoteSource])\n\n    return (\n        <Content className='overflow-auto'>\n            <PageHeader title='Performance' />\n            <Content>\n                <section className='flex flex-col mb-5'>\n                    <h1 className='mb-4 text-2xl text-gray-700'>Operation</h1>\n                    <Form\n                        form={form}\n                        layout='inline'\n                        onValuesChange={onValuesChange}\n                        initialValues={{\n                            imageProtocol: true,\n                            imageExt: true,\n                            imageLazyLoad: true,\n                        }}\n                    >\n                        <Form.Item label='图片协议' name='imageProtocol' valuePropName='checked'>\n                            <Switch checkedChildren='https' unCheckedChildren='http' />\n                        </Form.Item>\n                        <Form.Item label='图片格式' name='imageExt' valuePropName='checked'>\n                            <Switch checkedChildren='png' unCheckedChildren='webp' />\n                        </Form.Item>\n                        <Form.Item label='图片按需' name='imageLazyLoad' valuePropName='checked'>\n                            <Switch checkedChildren='是' unCheckedChildren='否' />\n                        </Form.Item>\n                    </Form>\n                </section>\n                <section className='flex flex-col mb-5'>\n                    <h1 className='mb-4 text-2xl text-gray-700'> Performance Score</h1>\n                    <Table\n                        pagination={false}\n                        columns={columns}\n                        dataSource={scores}\n                        bordered\n                        summary={(pageData) => {\n                            const total = pageData.reduce((sum, { score, weight }) => {\n                                return sum + score * weight\n                            }, 0)\n                            return (\n                                <>\n                                    <Table.Summary.Row>\n                                        <Table.Summary.Cell>Total</Table.Summary.Cell>\n                                        <Table.Summary.Cell colSpan={3}>{total.toFixed(3)}</Table.Summary.Cell>\n                                    </Table.Summary.Row>\n                                </>\n                            )\n                        }}\n                    />\n                </section>\n                <section className='flex flex-col mb-5'>\n                    <h1 className='mb-4 text-2xl text-gray-700'>Meaning of Performance </h1>\n                    <Image className='mb-2 w-full' preview={false} src={data['img-example']} alt='' />\n                </section>\n                <section className='flex flex-col mb-5'>\n                    <h1 className='mb-4 text-2xl text-gray-700'>Navigation</h1>\n                    <Image className='w-full' preview={false} src={data['img-navigation']} alt='' />\n                </section>\n                <section className='flex flex-col mb-5'>\n                    <h1 className='mb-4 text-2xl text-gray-700'>First Contentful Paint</h1>\n                    <Image className='w-full' preview={false} src={data['img-fcp']} alt='' />\n                </section>\n                <section className='flex flex-col'>\n                    <h1 className='mb-4 text-2xl text-gray-700'>Largest Contentful Paint</h1>\n                    <Image className='w-full' preview={false} src={data['img-lcp']} alt='' />\n                </section>\n            </Content>\n        </Content>\n    )\n}\n\nexport default connect(({ performance }) => {\n    const { scores } = performance\n    return {\n        scores,\n    }\n})(withBaseContent(Performance))\n"],"sourceRoot":""}