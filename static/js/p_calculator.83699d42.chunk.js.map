{"version":3,"sources":["components/PageHeader/index.js","hoc/baseContent.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","utils/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","constants/metrics.js","pages/calculator/components/MetricsTable.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","pages/calculator/components/Editor.js","pages/calculator/index.js"],"names":["PageHeader","title","className","type","withBaseContent","Component","props","module","exports","ua","navigator","userAgent","isWindowsPhone","test","isSymbian","isAndroid","isFireFox","isTablet","isPhone","determineMinMax","metricScoring","valueAtScore100","VALUE_AT_QUANTILE","valueAtScore5","min","Math","floor","max","ceil","step","units","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_objectWithoutProperties","source","excluded","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","metricsMap","fcp","act","ccp","EditableContext","React","createContext","columns","dataIndex","render","text","width","editable","EditableRow","index","useForm","form","component","Provider","EditableCell","children","record","handleSave","restProps","useState","editing","setEditing","inputRef","useRef","useContext","useEffect","current","focus","toggleEdit","setFieldsValue","save","fn","a","validateFields","values","console","log","self","this","args","arguments","apply","err","undefined","childNode","Item","style","margin","name","rules","required","message","ref","onPressEnter","onBlur","paddingRight","onClick","MetricsTable","metricsConfig","onMetricsChange","dataSource","useMemo","entries","map","k","v","metrics","adaptColumns","col","onCell","weight","median","p10","pagination","bordered","rowClassName","components","body","row","cell","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","Editor","metricsData","onScoreChange","onValueChange","weightMax","m","data","onInput","e","valueAsNumber","toLocaleString","score","align","Content","setMetricsData","setMetrics","useCallback","val","round","QUANTILE_AT_VALUE","computedValue","preState","href","rel"],"mappings":"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","file":"static/js/p_calculator.83699d42.chunk.js","sourcesContent":["import { Divider } from 'antd'\n\nfunction PageHeader({ title }) {\n    return (\n        <>\n            <div className='text-3xl font-semibold'>{title}</div>\n            <Divider type='horizontal' />\n        </>\n    )\n}\n\nexport default PageHeader\n","const withBaseContent = (Component) => {\n    return (props) => (\n        <div className='flex-1 p-5 overflow-auto'>\n            <Component {...props} />\n        </div>\n    )\n}\n\nexport default withBaseContent\n","module.exports = require(\"regenerator-runtime\");\n","import { VALUE_AT_QUANTILE } from './math'\n\nconst os = (function () {\n    const ua = navigator.userAgent\n\n    const isWindowsPhone = /(?:Windows Phone)/.test(ua),\n        isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone,\n        isAndroid = /(?:Android)/.test(ua),\n        isFireFox = /(?:Firefox)/.test(ua),\n        isTablet =\n            /(?:iPad|PlayBook)/.test(ua) ||\n            (isAndroid && !/(?:Mobile)/.test(ua)) ||\n            (isFireFox && /(?:Tablet)/.test(ua)),\n        isPhone = /(?:iPhone)/.test(ua) && !isTablet,\n        isPc = !isPhone && !isAndroid && !isSymbian\n    return {\n        isTablet: isTablet,\n        isPhone: isPhone,\n        isAndroid: isAndroid,\n        isPc: isPc,\n    }\n})()\n\nfunction determineMinMax(metricScoring) {\n    const valueAtScore100 = VALUE_AT_QUANTILE(metricScoring, 0.995)\n    const valueAtScore5 = VALUE_AT_QUANTILE(metricScoring, 0.05)\n\n    let min = Math.floor(valueAtScore100 / 1000) * 1000\n    let max = Math.ceil(valueAtScore5 / 1000) * 1000\n    let step = 10\n\n    // Special handling for CLS\n    if (metricScoring.units === 'unitless') {\n        min = 0\n        max = Math.ceil(valueAtScore5 * 100) / 100\n        step = 0.01\n    }\n\n    return {\n        min,\n        max,\n        step,\n    }\n}\n\nexport { os, determineMinMax }\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","const metricsMap = {\n    fcp: 'first-contentful-paint',\n    act: 'api-complete-time',\n    ccp: 'custom-contentful-paint',\n}\n\nexport default metricsMap\n","import React, { useContext, useEffect, useMemo, useRef, useState } from 'react'\nimport { Table, Form, Input } from 'antd'\nimport metricsMap from 'src/constants/metrics'\n\nconst EditableContext = React.createContext(null)\n\nconst columns = [\n    {\n        title: 'metrics',\n        dataIndex: 'metrics',\n        key: 'metrics',\n        render: (text) => <div>{`${metricsMap[text]}（${text}）`}</div>,\n    },\n    { title: 'median(ms)', dataIndex: 'median', key: 'median', width: '20%', editable: true },\n    { title: 'p10(ms)', dataIndex: 'p10', key: 'p10', width: '20%', editable: true },\n    { title: 'weight', dataIndex: 'weight', key: 'weight', width: '20%', editable: true },\n]\n\nfunction EditableRow({ index, ...props }) {\n    const [form] = Form.useForm()\n\n    return (\n        <Form form={form} component={false}>\n            <EditableContext.Provider value={form}>\n                <tr {...props} />\n            </EditableContext.Provider>\n        </Form>\n    )\n}\n\nfunction EditableCell({ title, editable, children, dataIndex, record, handleSave, ...restProps }) {\n    const [editing, setEditing] = useState(false)\n    const inputRef = useRef(null)\n    const form = useContext(EditableContext)\n    useEffect(() => {\n        if (editing) {\n            inputRef.current.focus()\n        }\n    }, [editing])\n\n    const toggleEdit = () => {\n        setEditing(!editing)\n        form.setFieldsValue({\n            [dataIndex]: record[dataIndex],\n        })\n    }\n\n    const save = async () => {\n        try {\n            const values = await form.validateFields()\n            toggleEdit()\n            handleSave({ ...record, ...values, ...restProps })\n        } catch (errInfo) {\n            console.log('Save failed:', errInfo)\n        }\n    }\n\n    let childNode = children\n\n    if (editable) {\n        childNode = editing ? (\n            <Form.Item\n                style={{\n                    margin: 0,\n                }}\n                name={dataIndex}\n                rules={[\n                    {\n                        required: true,\n                        message: `${title} is required.`,\n                    },\n                ]}\n            >\n                <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n            </Form.Item>\n        ) : (\n            <div\n                className='editable-cell-value-wrap'\n                style={{\n                    paddingRight: 24,\n                }}\n                onClick={toggleEdit}\n            >\n                {children}\n            </div>\n        )\n    }\n\n    return <td {...restProps}>{childNode}</td>\n}\n\nfunction MetricsTable({ metricsConfig, onMetricsChange }) {\n    const dataSource = useMemo(() => {\n        return Object.entries(metricsConfig).map(([k, v]) => ({ metrics: k, ...v, key: k }))\n    }, [metricsConfig])\n\n    const adaptColumns = useMemo(() => {\n        return columns.map((col, i) => {\n            if (!col.editable) {\n                return { ...col, key: i }\n            }\n            return {\n                ...col,\n                key: i,\n                onCell: (record) => ({\n                    record,\n                    editable: col.editable,\n                    dataIndex: col.dataIndex,\n                    title: col.title,\n                    index: i,\n                    handleSave: ({ key, weight, median, p10 }) => {\n                        onMetricsChange({ [key]: { weight, median, p10 } })\n                    },\n                }),\n            }\n        })\n    }, [onMetricsChange])\n\n    return (\n        <Table\n            pagination={false}\n            bordered\n            rowClassName={() => 'editable-row'}\n            components={{\n                body: {\n                    row: EditableRow,\n                    cell: EditableCell,\n                },\n            }}\n            columns={adaptColumns}\n            dataSource={dataSource}\n        />\n    )\n}\n\nexport default MetricsTable\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { useMemo } from 'react'\nimport { Table } from 'antd'\nimport { determineMinMax } from 'src/utils'\nimport metricsMap from 'src/constants/metrics'\n\nfunction Editor({ metricsData = [], onScoreChange, onValueChange }) {\n    const dataSource = useMemo(() => {\n        const weightMax = Math.max(...metricsData.map((m) => m.metricScoring.weight))\n        return metricsData.map((data, i) => ({ ...data, weightMax, key: i }))\n    }, [metricsData])\n\n    const columns = useMemo(\n        () => [\n            {\n                title: 'metrics',\n                dataIndex: 'metrics',\n                key: 'metrics',\n                render: (text, record) => <div>{`${metricsMap[record.name]}（${record.name}）`}</div>,\n            },\n            {\n                title: 'Value',\n                dataIndex: 'value',\n                key: 'value',\n                render: (text, { name, metricScoring, value }) => {\n                    const { min, max, step } = determineMinMax(metricScoring)\n\n                    return (\n                        <div className='flex flex-col'>\n                            <input\n                                type='range'\n                                min={min}\n                                value={value}\n                                max={max}\n                                step={step}\n                                className=''\n                                onInput={(e) => onValueChange(name, e.target?.valueAsNumber)}\n                            />\n                            <output className='text-right'>{`${value.toLocaleString()}ms`}</output>\n                        </div>\n                    )\n                },\n            },\n            {\n                title: 'Metric Score',\n                dataIndex: 'score',\n                key: 'score',\n                render: (text, { name, metricScoring, score, weightMax }) => {\n                    return (\n                        <div className='flex flex-col items-end'>\n                            <input\n                                type='range'\n                                style={{ width: `${(metricScoring.weight / weightMax) * 100}%` }}\n                                value={score}\n                                onInput={(e) => onScoreChange(name, e.target?.valueAsNumber)}\n                            />\n                            <output className='text-right'>{score}</output>\n                        </div>\n                    )\n                },\n            },\n            {\n                title: 'Weighting',\n                dataIndex: 'weight',\n                key: 'weight',\n                align: 'right',\n                render: (text, { metricScoring }) => <span>{metricScoring.weight * 100}%</span>,\n            },\n        ],\n        [onScoreChange, onValueChange]\n    )\n\n    return <Table pagination={false} columns={columns} dataSource={dataSource} />\n}\n\nexport default Editor\n","import './index.less'\nimport { useState, useEffect, useCallback } from 'react'\nimport { Layout, Divider } from 'antd'\nimport PageHeader from 'src/components/PageHeader'\nimport withBaseContent from 'src/hoc/baseContent'\nimport metricsConfig from 'src/constants/performance'\nimport { QUANTILE_AT_VALUE, VALUE_AT_QUANTILE } from 'src/utils/math'\nimport { determineMinMax } from 'src/utils'\nimport MetricsTable from './components/MetricsTable'\nimport Editor from './components/Editor'\n\nconst { Content } = Layout\n\nfunction Calculator() {\n    const [metricsData, setMetricsData] = useState([])\n\n    const [metrics, setMetrics] = useState(metricsConfig)\n\n    const onValueChange = useCallback(\n        (name, val) => {\n            const data = metricsData.map((metrics) => {\n                if (metrics.name === name) {\n                    return {\n                        ...metrics,\n                        value: val,\n                        score: Math.round(QUANTILE_AT_VALUE(metrics.metricScoring, val) * 100),\n                    }\n                }\n\n                return metrics\n            })\n\n            setMetricsData(data)\n        },\n        [metricsData]\n    )\n\n    const onScoreChange = useCallback(\n        (name, score) => {\n            const data = metricsData.map((metrics) => {\n                if (metrics.name === name) {\n                    const { min, max } = determineMinMax(metrics.metricScoring)\n                    let computedValue = VALUE_AT_QUANTILE(metrics.metricScoring, score / 100)\n                    computedValue = Math.max(Math.min(computedValue, max), min)\n\n                    return {\n                        ...metrics,\n                        value: Math.round(computedValue),\n                        score: score,\n                    }\n                }\n\n                return metrics\n            })\n\n            setMetricsData(data)\n        },\n        [metricsData]\n    )\n\n    const onMetricsChange = useCallback((metrics) => {\n        setMetrics((preState) => {\n            return {\n                ...preState,\n                ...metrics,\n            }\n        })\n    }, [])\n\n    useEffect(() => {\n        const data = Object.entries(metrics).map(([key, value]) => {\n            return {\n                name: key,\n                metricScoring: value,\n                value: value.median,\n                score: Math.round(QUANTILE_AT_VALUE(value, value.median) * 100),\n            }\n        })\n        setMetricsData(data)\n    }, [metrics])\n\n    return (\n        <Content>\n            <PageHeader title='Calculator' />\n            <Content>\n                <div className='mb-5 underline text-2xl'>\n                    <a href='https://www.desmos.com/calculator/oqlvmezbze?lang=zh-CN' target='_blank' rel='noreferrer'>\n                        computational formula\n                    </a>\n                </div>\n                <MetricsTable metricsConfig={metrics} onMetricsChange={onMetricsChange} />\n                <Divider />\n                <Editor metricsData={metricsData} onScoreChange={onScoreChange} onValueChange={onValueChange} />\n            </Content>\n        </Content>\n    )\n}\n\nexport default withBaseContent(Calculator)\n"],"sourceRoot":""}