(this["webpackJsonpmonitor-demo"]=this["webpackJsonpmonitor-demo"]||[]).push([[0],{130:function(e,t,n){"use strict";var a=n(160),r=n(72),c=new a.a({appId:"monitor-demo",version:"1.0.0",immediately:!0,reportCallback:function(e){var t=r.a._store,n=e.data,a=n.name,c=n.value;"first-contentful-paint"!==a&&"api-complete-time"!==a&&"custom-contentful-paint"!==a||t.dispatch({type:"performance/calcScore",payload:{name:a,value:c}}),t.dispatch({type:"performance/addMetrics",payload:e})},needCCP:!0,logFpsCount:20,hashHistory:!0});t.a=c},176:function(e,t,n){},181:function(e,t,n){},183:function(e,t,n){},282:function(e,t){},286:function(e,t,n){"use strict";n.r(t);n(176),n(0);var a=n(32),r=n.n(a),c=(n(130),n(29)),i=n(172),o=n(72);Object(i.a)({dsn:"https://chryseis.com/api",maxBreadcrumbs:100,beforePushBreadcrumb:function(e,t){o.a._store.dispatch({type:"error/addItem",payload:Object(c.a)(Object(c.a)({},t),{},{time:+new Date})})}});var s=n(9);r.a.render(Object(s.jsx)(o.b,{}),document.getElementById("root"))},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return X}));var a={};n.r(a),n.d(a,"performance",(function(){return U})),n.d(a,"error",(function(){return V}));var r=n(96),c=n(30),i=(n(181),n(29)),o=n(0),s=n.n(o),l=n(290),d=n(130),u=n(9);var m=function(){return Object(o.useEffect)((function(){return function(){d.a.customContentfulPaint()}}),[]),Object(u.jsx)("div",{className:"flex-1 p-5",children:Object(u.jsx)(l.a,{})})},b=function(e){var t=s.a.lazy(e);return function(e){return Object(u.jsx)(o.Suspense,{fallback:Object(u.jsx)(m,{}),children:Object(u.jsx)(t,Object(i.a)({},e))})}},f=[{title:"Performance",exact:!0,path:"/",component:b((function(){return Promise.all([n.e(7),n.e(4)]).then(n.bind(null,341))}))},{title:"Error",exact:!0,path:"/error",component:b((function(){return Promise.all([n.e(8),n.e(2)]).then(n.bind(null,338))}))},{title:"Calculator",exact:!0,path:"/calculator",component:b((function(){return n.e(1).then(n.bind(null,343))}))},{title:"Example",exact:!0,path:"/example",component:b((function(){return Promise.all([n.e(9),n.e(3)]).then(n.bind(null,342))}))}],p=n(50),j=(n(183),n(288)),h=n(133),x=n(61),O=n(291),v=n(289),y=n(35),g=n(114),w=j.a.Content,I=j.a.Header,S={"page-information":"\u9875\u9762\u4fe1\u606f","network-information":"\u7f51\u7edc\u4fe1\u606f","device-information":"\u8bbe\u5907\u4fe1\u606f","navigation-timing":"\u5bfc\u822a\u52a0\u8f7d\u65f6\u95f4","first-paint":"\u7b2c\u4e00\u4e2a\u50cf\u7d20\u6e32\u67d3\u65f6\u95f4","first-contentful-paint":"\u7b2c\u4e00\u4e2a\u5143\u7d20\u6e32\u67d3\u65f6\u95f4","first-input-delay":"\u7528\u6237\u7b2c\u4e00\u6b21\u8f93\u5165\u5ef6\u8fdf","largest-contentful-paint":"\u6700\u5927\u5143\u7d20\u6e32\u67d3\u65f6\u95f4","custom-contentful-paint":"\u9875\u9762\u5b8c\u6210\u65f6\u6e32\u67d3\u65f6\u95f4",fps:"\u9875\u9762\u5237\u65b0\u7387","api-complete-time":"\u9996\u5c4f\u63a5\u53e3\u8bf7\u6c42\u5b8c\u6210\u65f6\u95f4","resource-flow":"\u8d44\u6e90\u52a0\u8f7d\u5217\u8868","cumulative-layout-shift":"\u9875\u9762\u610f\u5916\u4f4d\u79fb\u91cf"},k=[{title:"\u6307\u6807",dataIndex:"metrics",key:"metrics"},{title:"\u63cf\u8ff0",dataIndex:"describe",key:"describe"},{title:"\u4f1a\u8bddid",dataIndex:"sectionId",key:"sectionId"},{title:"\u4e0a\u62a5\u65f6\u95f4",dataIndex:"time",key:"time"}];function M(e){var t=e.data,n=e.contentStyle,a=e.size;return isNaN(Number(t))?Array.isArray(t)?t.map((function(e,t){return Object(u.jsx)(O.b,{className:"mb-5",bordered:!0,contentStyle:n,size:a,title:"resource-".concat(t+1),children:Object.entries(JSON.parse(JSON.stringify(e))).map((function(e){var t=Object(x.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)(O.b.Item,{label:n,children:a},n)}))},t)})):Object(u.jsx)(O.b,{bordered:!0,contentStyle:n,size:a,children:Object.entries(t).map((function(e){var t=Object(x.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)(O.b.Item,{label:n,children:a},n)}))}):Object(u.jsx)(O.b,{bordered:!0,contentStyle:n,size:a,children:Object(u.jsx)(O.b.Item,{label:"value",children:t})})}function N(e){var t=e.name,n=e.value;return Object(u.jsx)(M,{name:t,data:n,contentStyle:{backgroundColor:"#fff"},size:"small"})}var z=Object(y.c)((function(e){return{performance:e.performance}}))((function(e){var t=e.performance,n=Object(o.useMemo)((function(){return t.metricsItems.map((function(e,t){var n=e.sectionId,a=e.appId,r=e.data,c=r.name,i=r.value,o=e.timestamp;return{key:t,appId:a,sectionId:n,metrics:c,describe:S[c],value:i,time:Object(g.a)(o,"yyyy-MM-dd HH:mm:ss")}}))}),[t]);return Object(u.jsxs)(w,{className:"flex flex-col w-full",children:[Object(u.jsx)(I,{className:"flex items-center text-white text-2xl bg-blue-200 shadow-sm",children:"Performance Metrics"}),Object(u.jsx)("div",{className:"flex-1 overflow-auto",children:Object(u.jsx)(v.a,{pagination:!1,columns:k,dataSource:n,sticky:!0,expandable:{expandedRowRender:function(e){return Object(u.jsx)(N,Object(i.a)({},e))}}})})]})})),C=n(292),P=n(4),R=n.n(P),H=n(166),A=j.a.Header,B=j.a.Content,E=[{title:"\u7c7b\u522b",dataIndex:"category",key:"category",render:function(e){return Object(u.jsx)("i",{className:R()("icon","iconfont",{user:"icon-actions",http:"icon-http",exception:"icon-Exception",debug:"icon-debug"}[e],"text-xl")})}},{title:"\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u7b49\u7ea7",dataIndex:"level",key:"level",render:function(e){return Object(u.jsx)(C.a,{color:"#93C5FD",children:e})}},{title:"\u65f6\u95f4",dataIndex:"time",key:"time"}];function F(e){var t=e.data,n=e.contentStyle,a=e.size;return Object(H.isString)(t)?Object(u.jsx)(O.b,{bordered:!0,contentStyle:n,size:a,children:Object(u.jsx)(O.b.Item,{label:"value",children:t})}):Object(u.jsx)(O.b,{bordered:!0,contentStyle:n,size:a,children:Object.entries(t).map((function(e){var t=Object(x.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)(O.b.Item,{label:n,children:JSON.stringify(a)},n)}))})}function J(e){var t=e.data;return Object(u.jsx)(F,{data:t,contentStyle:{backgroundColor:"#fff"},size:"small"})}var T=Object(y.c)((function(e){return{actionItems:e.error.actionItems}}))((function(e){var t=e.actionItems,n=Object(o.useMemo)((function(){return t.map((function(e,t){var n=e.type,a=e.category,r=e.data,c=e.level,i=e.time;return{key:t,type:n,category:a,level:c,time:Object(g.a)(i,"yyyy-MM-dd HH:mm:ss"),data:r}}))}),[t]);return Object(u.jsxs)(B,{className:"flex flex-col w-full h-full ",children:[Object(u.jsx)(A,{className:"flex items-center text-white text-2xl bg-blue-200 shadow-sm",children:"Action List"}),Object(u.jsx)("div",{className:"flex-1 overflow-auto",children:Object(u.jsx)(v.a,{pagination:!1,columns:E,dataSource:n,sticky:!0,expandable:{expandedRowRender:function(e){return Object(u.jsx)(J,Object(i.a)({},e))}}})})]})})),q=j.a.Header,D=j.a.Content;var _=function(e){var t=e.children;return Object(u.jsxs)(j.a,{className:"flex flex-col h-screen dark",children:[Object(u.jsxs)(q,{className:"flex items-center justify-between  h-16 px-5 text-2xl text-red-50 bg-blue-300 shadow-xl",children:[Object(u.jsx)("div",{children:"Monitor"}),Object(u.jsx)("a",{href:"https://github.com/clouDr-f2e/monitor",target:"_blank",rel:"noreferrer",children:Object(u.jsx)("i",{className:"icon iconfont icon-github-fill text-3xl"})})]}),Object(u.jsx)(j.a,{className:"relative flex flex-1 split-wrapper",children:Object(u.jsxs)(h.a,{split:"vertical",minSize:200,defaultSize:"40%",children:[Object(u.jsx)(D,{className:"h-full rounded-l-md bg-white split-wrapper",children:Object(u.jsxs)(h.a,{split:"horizontal",minSize:300,maxSize:600,defaultSize:"50%",pane2Style:{overflow:"hidden"},children:[Object(u.jsx)(z,{}),Object(u.jsx)(T,{})]})}),Object(u.jsx)(D,{className:"flex flex-col h-full rounded-r-md bg-white",children:t})]})})]})};var Q=function(){var e=Object(o.useRef)(null),t=Object(o.useRef)([]),n=Object(p.e)(),a=Object(p.f)(),r=Object(o.useState)({}),c=Object(x.a)(r,2),i=c[0],s=c[1],l=Object(o.useCallback)((function(e){n.push(e.path)}),[n]);return Object(o.useEffect)((function(){if(e.current){var n=e.current.getBoundingClientRect().x,r=t.current.find((function(e){return e.id===a.pathname}));if(r){var c=r.getBoundingClientRect().x-n;s({width:r.clientWidth+"px",transform:"translate3d(".concat(c,"px,0px,0px)")})}}}),[a.pathname]),Object(u.jsxs)("div",{className:"relative flex items-center h-16 shadow-sm",ref:e,children:[f.map((function(e,n){return Object(u.jsx)("div",{ref:function(e){return t.current[n]=e},id:e.path,className:R()("px-3 py-2","text-xl",{"text-blue-300":a.pathname===e.path,"text-gray-800":a.pathname!==e.path},"cursor-pointer","hover:text-blue-300"),onClick:function(){return l(e)},children:e.title},e.path)})),Object(u.jsx)("div",{className:"absolute z-10 left-0 bottom-0 h-0.5 bg-blue-300 transition-transform transition-all duration-200 ease-linear",style:i}),Object(u.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-px bg-bg-gray-10"})]})};var W=function(e){var t=e.history;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(_,{children:Object(u.jsxs)(p.b,{history:t,children:[Object(u.jsx)(Q,{}),Object(u.jsxs)(p.c,{children:[f.map((function(e){return Object(u.jsx)(p.a,Object(i.a)({},e),e.path)})),Object(u.jsx)(p.a,{component:function(){return Object(u.jsx)("div",{children:"404"})}})]})]})})})};function L(e,t){var n=e.median,a=e.podr,r=e.p10;a||(a=$(n,r));var c=Math.log(n),i=Math.log(a/n),o=Math.sqrt(1-3*i-Math.sqrt((i-3)*(i-3)-8))/2;return(1-function(e){var t=e<0?-1:1,n=1/(1+.3275911*(e=Math.abs(e)));return t*(1-n*(.254829592+n*(n*(1.421413741+n*(1.061405429*n-1.453152027))-.284496736))*Math.exp(-e*e))}((Math.log(t)-c)/(Math.SQRT2*o)))/2}function $(e,t){var n=Math.log(e),a=Math.abs(Math.log(t)-n)/(.9061938024368232*Math.SQRT2),r=-3*a-Math.sqrt(4+a*a);return Math.exp(n+a/2*r)}var G={fcp:{"4g":{mobile:{weight:.3,median:4500,p10:1500},pc:{weight:.3,median:4e3,p10:1e3}},"3g":{mobile:{weight:.3,median:6e3,p10:3e3},pc:{weight:.3,median:6e3,p10:2500}}},act:{"4g":{mobile:{weight:.3,median:6500,p10:2500},pc:{weight:.3,median:6e3,p10:2e3}},"3g":{mobile:{weight:.3,median:8e3,p10:4e3},pc:{weight:.3,median:7500,p10:3500}}},ccp:{"4g":{mobile:{weight:.4,median:7500,p10:3500},pc:{weight:.4,median:7e3,p10:3e3}},"3g":{mobile:{weight:.4,median:9e3,p10:5e3},pc:{weight:.4,median:8500,p10:4500}}}},K=function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,a=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),c=/(?:iPad|PlayBook)/.test(e)||a&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),i=/(?:iPhone)/.test(e)&&!c;return{isTablet:c,isPhone:i,isAndroid:a,isPc:!i&&!a&&!n}}(),U={namespace:"performance",state:{metricsItems:[],scores:[]},reducers:{addMetrics:function(e,t){var n=t.payload;return Object(i.a)(Object(i.a)({},e),{},{metricsItems:e.metricsItems.concat(n)})},calcScore:function(e,t){var n=t.payload,a=n.name,r=n.value,c=e.metricsItems.find((function(e){return"network-information"===e.data.name})).data.value.effectiveType,o=G[a.replace(/(?:-|)([a-z])[a-z]*/g,"$1")][c][K.isPc?"pc":"mobile"],s=o.median,l=o.p10,d=o.weight,u=(100*L({median:s,p10:l},r)).toFixed(2);return Object(i.a)(Object(i.a)({},e),{},{scores:e.scores.concat({title:a,score:u,value:r,weight:d,key:a})})}},effects:{}},V={namespace:"error",state:{actionItems:[]},reducers:{addItem:function(e,t){var n=t.payload;return{actionItems:e.actionItems.concat(n)}}}},X=Object(r.a)({history:Object(c.a)()});for(var Y in a)X.model(a[Y]);X.router(W);var Z=X.start();t.b=Z}},[[286,5,6]]]);
//# sourceMappingURL=main.edb60647.chunk.js.map