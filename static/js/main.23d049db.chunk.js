(this["webpackJsonpmonitor-demo"]=this["webpackJsonpmonitor-demo"]||[]).push([[0],{128:function(e,t,n){"use strict";var a=n(159),r=n(72),c=new a.a({appId:"monitor-demo",version:"1.0.0",immediately:!0,reportCallback:function(e){var t=r.a._store,n=e.data,a=n.name,c=n.value;"first-contentful-paint"!==a&&"api-complete-time"!==a&&"custom-contentful-paint"!==a||t.dispatch({type:"performance/calcScore",payload:{name:a,value:c}}),t.dispatch({type:"performance/addMetrics",payload:e})},needCCP:!0,logFpsCount:20,hashHistory:!0});t.a=c},175:function(e,t,n){},180:function(e,t,n){},182:function(e,t,n){},281:function(e,t){},285:function(e,t,n){"use strict";n.r(t);n(175),n(0);var a=n(32),r=n.n(a),c=(n(128),n(29)),i=n(171),o=n(72);Object(i.a)({dsn:"https://chryseis.com/api",maxBreadcrumbs:100,beforePushBreadcrumb:function(e,t){o.a._store.dispatch({type:"error/addItem",payload:Object(c.a)(Object(c.a)({},t),{},{time:+new Date})})}});var s=n(10);r.a.render(Object(s.jsx)(o.b,{}),document.getElementById("root"))},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var a={};n.r(a),n.d(a,"performance",(function(){return K})),n.d(a,"error",(function(){return U}));var r=n(95),c=n(30),i=(n(180),n(29)),o=n(0),s=n.n(o),l=n(128),u=n(10);var d=function(){return Object(o.useEffect)((function(){return function(){l.a.customContentfulPaint()}}),[]),Object(u.jsx)("div",{className:"flex-1 p-5",children:"loading"})},m=function(e){var t=s.a.lazy(e);return function(e){return Object(u.jsx)(o.Suspense,{fallback:Object(u.jsx)(d,{}),children:Object(u.jsx)(t,Object(i.a)({},e))})}},b=[{title:"Performance",exact:!0,path:"/",component:m((function(){return Promise.all([n.e(7),n.e(4)]).then(n.bind(null,337))}))},{title:"Error",exact:!0,path:"/error",component:m((function(){return Promise.all([n.e(8),n.e(2)]).then(n.bind(null,332))}))},{title:"Calculator",exact:!0,path:"/calculator",component:m((function(){return n.e(1).then(n.bind(null,334))}))},{title:"Example",exact:!0,path:"/example",component:m((function(){return Promise.all([n.e(9),n.e(3)]).then(n.bind(null,338))}))}],f=n(50),p=(n(182),n(287)),j=n(131),h=n(61),x=n(289),O=n(288),v=n(35),y=n(113),g=p.a.Content,w=p.a.Header,I={"page-information":"\u9875\u9762\u4fe1\u606f","network-information":"\u7f51\u7edc\u4fe1\u606f","device-information":"\u8bbe\u5907\u4fe1\u606f","navigation-timing":"\u5bfc\u822a\u52a0\u8f7d\u65f6\u95f4","first-paint":"\u7b2c\u4e00\u4e2a\u50cf\u7d20\u6e32\u67d3\u65f6\u95f4","first-contentful-paint":"\u7b2c\u4e00\u4e2a\u5143\u7d20\u6e32\u67d3\u65f6\u95f4","first-input-delay":"\u7528\u6237\u7b2c\u4e00\u6b21\u8f93\u5165\u5ef6\u8fdf","largest-contentful-paint":"\u6700\u5927\u5143\u7d20\u6e32\u67d3\u65f6\u95f4","custom-contentful-paint":"\u9875\u9762\u5b8c\u6210\u65f6\u6e32\u67d3\u65f6\u95f4",fps:"\u9875\u9762\u5237\u65b0\u7387","api-complete-time":"\u9996\u5c4f\u63a5\u53e3\u8bf7\u6c42\u5b8c\u6210\u65f6\u95f4","resource-flow":"\u8d44\u6e90\u52a0\u8f7d\u5217\u8868","cumulative-layout-shift":"\u9875\u9762\u610f\u5916\u4f4d\u79fb\u91cf"},S=[{title:"\u6307\u6807",dataIndex:"metrics",key:"metrics"},{title:"\u63cf\u8ff0",dataIndex:"describe",key:"describe"},{title:"\u4f1a\u8bddid",dataIndex:"sectionId",key:"sectionId"},{title:"\u4e0a\u62a5\u65f6\u95f4",dataIndex:"time",key:"time"}];function k(e){var t=e.data,n=e.contentStyle,a=e.size;return isNaN(Number(t))?Array.isArray(t)?t.map((function(e,t){return Object(u.jsx)(x.b,{className:"mb-5",bordered:!0,contentStyle:n,size:a,title:"resource-".concat(t+1),children:Object.entries(JSON.parse(JSON.stringify(e))).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)(x.b.Item,{label:n,children:a},n)}))},t)})):Object(u.jsx)(x.b,{bordered:!0,contentStyle:n,size:a,children:Object.entries(t).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)(x.b.Item,{label:n,children:a},n)}))}):Object(u.jsx)(x.b,{bordered:!0,contentStyle:n,size:a,children:Object(u.jsx)(x.b.Item,{label:"value",children:t})})}function M(e){var t=e.name,n=e.value;return Object(u.jsx)(k,{name:t,data:n,contentStyle:{backgroundColor:"#fff"},size:"small"})}var N=Object(v.c)((function(e){return{performance:e.performance}}))((function(e){var t=e.performance,n=Object(o.useMemo)((function(){return t.metricsItems.map((function(e,t){var n=e.sectionId,a=e.appId,r=e.data,c=r.name,i=r.value,o=e.timestamp;return{key:t,appId:a,sectionId:n,metrics:c,describe:I[c],value:i,time:Object(y.a)(o,"yyyy-MM-dd HH:mm:ss")}}))}),[t]);return Object(u.jsxs)(g,{className:"flex flex-col w-full ",children:[Object(u.jsx)(w,{className:"flex items-center text-white text-2xl bg-blue-200",children:"Performance Metrics"}),Object(u.jsx)("div",{className:"flex-1 overflow-auto",children:Object(u.jsx)(O.a,{pagination:!1,columns:S,dataSource:n,sticky:!0,expandable:{expandedRowRender:function(e){return Object(u.jsx)(M,Object(i.a)({},e))}}})})]})})),z=n(290),C=n(4),P=n.n(C),R=n(165),H=p.a.Header,A=p.a.Content,B=[{title:"\u7c7b\u522b",dataIndex:"category",key:"category",render:function(e){return Object(u.jsx)("i",{className:P()("icon","iconfont",{user:"icon-actions",http:"icon-http",exception:"icon-Exception",debug:"icon-debug"}[e],"text-xl")})}},{title:"\u7c7b\u578b",dataIndex:"type",key:"type"},{title:"\u7b49\u7ea7",dataIndex:"level",key:"level",render:function(e){return Object(u.jsx)(z.a,{color:"#93C5FD",children:e})}},{title:"\u65f6\u95f4",dataIndex:"time",key:"time"}];function E(e){var t=e.data,n=e.contentStyle,a=e.size;return Object(R.isString)(t)?Object(u.jsx)(x.b,{bordered:!0,contentStyle:n,size:a,children:Object(u.jsx)(x.b.Item,{label:"value",children:t})}):Object(u.jsx)(x.b,{bordered:!0,contentStyle:n,size:a,children:Object.entries(t).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(u.jsx)(x.b.Item,{label:n,children:JSON.stringify(a)},n)}))})}function F(e){var t=e.data;return Object(u.jsx)(E,{data:t,contentStyle:{backgroundColor:"#fff"},size:"small"})}var J=Object(v.c)((function(e){return{actionItems:e.error.actionItems}}))((function(e){var t=e.actionItems,n=Object(o.useMemo)((function(){return t.map((function(e,t){var n=e.type,a=e.category,r=e.data,c=e.level,i=e.time;return{key:t,type:n,category:a,level:c,time:Object(y.a)(i,"yyyy-MM-dd HH:mm:ss"),data:r}}))}),[t]);return Object(u.jsxs)(A,{className:"flex flex-col w-full h-full",children:[Object(u.jsx)(H,{className:"flex items-center text-white text-2xl bg-blue-200",children:"Action List"}),Object(u.jsx)("div",{className:"flex-1 overflow-auto",children:Object(u.jsx)(O.a,{pagination:!1,columns:B,dataSource:n,sticky:!0,expandable:{expandedRowRender:function(e){return Object(u.jsx)(F,Object(i.a)({},e))}}})})]})})),T=p.a.Header,q=p.a.Content;var D=function(e){var t=e.children;return Object(u.jsxs)(p.a,{className:"flex flex-col h-screen dark",children:[Object(u.jsx)(T,{className:"flex items-center h-16 px-3 text-2xl text-red-50 bg-blue-300 shadow-xl",children:"Monitor"}),Object(u.jsx)(p.a,{className:"relative flex flex-1 split-wrapper",children:Object(u.jsxs)(j.a,{split:"vertical",minSize:200,defaultSize:"40%",children:[Object(u.jsx)(q,{className:"h-full rounded-l-md bg-white split-wrapper",children:Object(u.jsxs)(j.a,{split:"horizontal",minSize:300,maxSize:600,defaultSize:"50%",pane2Style:{overflow:"hidden"},children:[Object(u.jsx)(N,{}),Object(u.jsx)(J,{})]})}),Object(u.jsx)(q,{className:"flex flex-col h-full rounded-r-md bg-white",children:t})]})})]})};var Q=function(){var e=Object(o.useRef)(null),t=Object(o.useRef)([]),n=Object(f.e)(),a=Object(f.f)(),r=Object(o.useState)({}),c=Object(h.a)(r,2),i=c[0],s=c[1],l=Object(o.useCallback)((function(e){n.push(e.path)}),[n]);return Object(o.useEffect)((function(){if(e.current){var n=e.current.getBoundingClientRect().x,r=t.current.find((function(e){return e.id===a.pathname}));if(r){var c=r.getBoundingClientRect().x-n;s({width:r.clientWidth+"px",transform:"translate3d(".concat(c,"px,0px,0px)")})}}}),[a.pathname]),Object(u.jsxs)("div",{className:"relative flex items-center h-16",ref:e,children:[b.map((function(e,n){return Object(u.jsx)("div",{ref:function(e){return t.current[n]=e},id:e.path,className:P()("px-3 py-2","text-xl",{"text-blue-300":a.pathname===e.path,"text-gray-800":a.pathname!==e.path},"cursor-pointer","hover:text-blue-300"),onClick:function(){return l(e)},children:e.title},e.path)})),Object(u.jsx)("div",{className:"absolute z-10 left-0 bottom-0 h-0.5 bg-blue-300 transition-transform transition-all duration-200 ease-linear",style:i}),Object(u.jsx)("div",{className:"absolute left-0 bottom-0 w-full h-px bg-bg-gray-10"})]})};var W=function(e){var t=e.history;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(D,{children:Object(u.jsxs)(f.b,{history:t,children:[Object(u.jsx)(Q,{}),Object(u.jsxs)(f.c,{children:[b.map((function(e){return Object(u.jsx)(f.a,Object(i.a)({},e),e.path)})),Object(u.jsx)(f.a,{component:function(){return Object(u.jsx)("div",{children:"404"})}})]})]})})})};function _(e,t){var n=e.median,a=e.podr,r=e.p10;a||(a=L(n,r));var c=Math.log(n),i=Math.log(a/n),o=Math.sqrt(1-3*i-Math.sqrt((i-3)*(i-3)-8))/2;return(1-function(e){var t=e<0?-1:1,n=1/(1+.3275911*(e=Math.abs(e)));return t*(1-n*(.254829592+n*(n*(1.421413741+n*(1.061405429*n-1.453152027))-.284496736))*Math.exp(-e*e))}((Math.log(t)-c)/(Math.SQRT2*o)))/2}function L(e,t){var n=Math.log(e),a=Math.abs(Math.log(t)-n)/(.9061938024368232*Math.SQRT2),r=-3*a-Math.sqrt(4+a*a);return Math.exp(n+a/2*r)}var $={fcp:{"4g":{mobile:{weight:.3,median:4500,p10:1500},pc:{weight:.3,median:4e3,p10:1e3}},"3g":{mobile:{weight:.3,median:6e3,p10:3e3},pc:{weight:.3,median:6e3,p10:2500}}},act:{"4g":{mobile:{weight:.3,median:6500,p10:2500},pc:{weight:.3,median:6e3,p10:2e3}},"3g":{mobile:{weight:.3,median:8e3,p10:4e3},pc:{weight:.3,median:7500,p10:3500}}},ccp:{"4g":{mobile:{weight:.4,median:7500,p10:3500},pc:{weight:.4,median:7e3,p10:3e3}},"3g":{mobile:{weight:.4,median:9e3,p10:5e3},pc:{weight:.4,median:8500,p10:4500}}}},G=function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,a=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),c=/(?:iPad|PlayBook)/.test(e)||a&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),i=/(?:iPhone)/.test(e)&&!c;return{isTablet:c,isPhone:i,isAndroid:a,isPc:!i&&!a&&!n}}(),K={namespace:"performance",state:{metricsItems:[],scores:[]},reducers:{addMetrics:function(e,t){var n=t.payload;return Object(i.a)(Object(i.a)({},e),{},{metricsItems:e.metricsItems.concat(n)})},calcScore:function(e,t){var n=t.payload,a=n.name,r=n.value,c=e.metricsItems.find((function(e){return"network-information"===e.data.name})).data.value.effectiveType,o=$[a.replace(/(?:-|)([a-z])[a-z]*/g,"$1")][c][G.isPc?"pc":"mobile"],s=o.median,l=o.p10,u=o.weight,d=(100*_({median:s,p10:l},r)).toFixed(2);return Object(i.a)(Object(i.a)({},e),{},{scores:e.scores.concat({title:a,score:d,value:r,weight:u,key:a})})}},effects:{}},U={namespace:"error",state:{actionItems:[]},reducers:{addItem:function(e,t){var n=t.payload;return{actionItems:e.actionItems.concat(n)}}}},V=Object(r.a)({history:Object(c.a)()});for(var X in a)V.model(a[X]);V.router(W);var Y=V.start();t.b=Y}},[[285,5,6]]]);
//# sourceMappingURL=main.23d049db.chunk.js.map