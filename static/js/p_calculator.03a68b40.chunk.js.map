{"version":3,"sources":["components/PageHeader/index.js","hoc/baseContent.js","../node_modules/antd/lib/grid/index.js","../node_modules/antd/lib/row/style/index.js","../node_modules/antd/lib/col/style/index.js","../node_modules/antd/lib/row/index.js","../node_modules/antd/lib/col/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","constants/metrics.js","pages/calculator/components/Editor.js","pages/calculator/index.js"],"names":["PageHeader","title","className","type","withBaseContent","Component","props","_interopRequireDefault","require","Object","defineProperty","exports","value","enumerable","get","_col","_row","_default","useBreakpoint","Row","Col","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","metricsMap","fcp","act","ccp","Editor","metricsData","onScoreChange","onValueChange","dataSource","useMemo","weightMax","Math","max","map","m","metricScoring","weight","data","i","key","columns","dataIndex","render","text","record","name","determineMinMax","min","step","onInput","e","target","valueAsNumber","toLocaleString","score","style","width","align","pagination","Content","Option","networkArr","endArr","useState","network","setNetwork","end","setEnd","setMetricsData","useCallback","val","metrics","round","QUANTILE_AT_VALUE","computedValue","VALUE_AT_QUANTILE","useEffect","entries","metricsConfig","median","gutter","span","onSelect","n","href","rel"],"mappings":"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","file":"static/js/p_calculator.03a68b40.chunk.js","sourcesContent":["import { Divider } from 'antd'\n\nfunction PageHeader({ title }) {\n    return (\n        <>\n            <div className='text-3xl font-semibold'>{title}</div>\n            <Divider type='horizontal' />\n        </>\n    )\n}\n\nexport default PageHeader\n","const withBaseContent = (Component) => {\n    return (props) => (\n        <div className='flex-1 p-5 overflow-auto'>\n            <Component {...props} />\n        </div>\n    )\n}\n\nexport default withBaseContent\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Col\", {\n  enumerable: true,\n  get: function get() {\n    return _col[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Row\", {\n  enumerable: true,\n  get: function get() {\n    return _row[\"default\"];\n  }\n});\nexports[\"default\"] = void 0;\n\nvar _row = _interopRequireDefault(require(\"./row\"));\n\nvar _col = _interopRequireDefault(require(\"./col\"));\n\nvar _useBreakpoint = _interopRequireDefault(require(\"./hooks/useBreakpoint\"));\n\nvar _default = {\n  useBreakpoint: _useBreakpoint[\"default\"]\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nrequire(\"../../style/default.less\");\n\nrequire(\"../../grid/style\");","\"use strict\";\n\nrequire(\"../../style/default.less\");\n\nrequire(\"../../grid/style\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _grid = require(\"../grid\");\n\nvar _default = _grid.Row;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _grid = require(\"../grid\");\n\nvar _default = _grid.Col;\nexports[\"default\"] = _default;","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","const metricsMap = {\n    fcp: 'first-contentful-paint',\n    act: 'api-complete-time',\n    ccp: 'custom-contentful-paint',\n}\n\nexport default metricsMap\n","import { useMemo } from 'react'\nimport { Table } from 'antd'\nimport { determineMinMax } from 'src/utils'\nimport metricsMap from 'src/constants/metrics'\n\nfunction Editor({ metricsData = [], onScoreChange, onValueChange }) {\n    const dataSource = useMemo(() => {\n        const weightMax = Math.max(...metricsData.map((m) => m.metricScoring.weight))\n        return metricsData.map((data, i) => ({ ...data, weightMax, key: i }))\n    }, [metricsData])\n\n    const columns = [\n        {\n            title: 'metrics',\n            dataIndex: 'metrics',\n            key: 'metrics',\n            render: (text, record) => <div>{`${metricsMap[record.name]}（${record.name}）`}</div>,\n        },\n        {\n            title: 'Value',\n            dataIndex: 'value',\n            key: 'value',\n            render: (text, { name, metricScoring, value }) => {\n                const { min, max, step } = determineMinMax(metricScoring)\n\n                return (\n                    <div className='flex flex-col'>\n                        <input\n                            type='range'\n                            min={min}\n                            value={value}\n                            max={max}\n                            step={step}\n                            className=''\n                            onInput={(e) => onValueChange(name, e.target.valueAsNumber)}\n                        />\n                        <output className='text-right'>{`${value.toLocaleString()}ms`}</output>\n                    </div>\n                )\n            },\n        },\n        {\n            title: 'Metric Score',\n            dataIndex: 'score',\n            key: 'score',\n            render: (text, { name, metricScoring, score, weightMax }) => {\n                return (\n                    <div className='flex flex-col items-end'>\n                        <input\n                            type='range'\n                            style={{ width: `${(metricScoring.weight / weightMax) * 100}%` }}\n                            value={score}\n                            onInput={(e) => onScoreChange(name, e.target.valueAsNumber)}\n                        />\n                        <output className='text-right'>{score}</output>\n                    </div>\n                )\n            },\n        },\n        {\n            title: 'Weighting',\n            dataIndex: 'weight',\n            key: 'weight',\n            align: 'right',\n            render: (text, { metricScoring }) => <span>{metricScoring.weight * 100}%</span>,\n        },\n    ]\n\n    return <Table pagination={false} columns={columns} dataSource={dataSource} />\n}\n\nexport default Editor\n","import { useState, useEffect, useCallback } from 'react'\nimport { Layout, Row, Col, Select, Divider } from 'antd'\nimport PageHeader from 'src/components/PageHeader'\nimport withBaseContent from 'src/hoc/baseContent'\nimport metricsConfig from 'src/constants/performance'\nimport { QUANTILE_AT_VALUE, VALUE_AT_QUANTILE } from 'src/utils/math'\nimport { determineMinMax } from 'src/utils'\nimport Editor from './components/Editor'\n\nconst { Content } = Layout\n\nconst { Option } = Select\n\nconst networkArr = ['4g', '3g']\n\nconst endArr = ['pc', 'mobile']\n\nfunction Calculator() {\n    const [network, setNetwork] = useState('4g')\n    const [end, setEnd] = useState('pc')\n    const [metricsData, setMetricsData] = useState([])\n\n    const onValueChange = useCallback(\n        (name, val) => {\n            const data = metricsData.map((metrics) => {\n                if (metrics.name === name) {\n                    return {\n                        ...metrics,\n                        value: val,\n                        score: Math.round(QUANTILE_AT_VALUE(metrics.metricScoring, val) * 100),\n                    }\n                }\n\n                return metrics\n            })\n\n            setMetricsData(data)\n        },\n        [metricsData]\n    )\n\n    const onScoreChange = useCallback(\n        (name, score) => {\n            const data = metricsData.map((metrics) => {\n                if (metrics.name === name) {\n                    const { min, max } = determineMinMax(metrics.metricScoring)\n                    let computedValue = VALUE_AT_QUANTILE(metrics.metricScoring, score / 100)\n                    computedValue = Math.max(Math.min(computedValue, max), min)\n\n                    return {\n                        ...metrics,\n                        value: Math.round(computedValue),\n                        score: score,\n                    }\n                }\n\n                return metrics\n            })\n\n            setMetricsData(data)\n        },\n        [metricsData]\n    )\n\n    useEffect(() => {\n        const data = Object.entries(metricsConfig).map(([key, value]) => {\n            return {\n                name: key,\n                metricScoring: value[network][end],\n                value: value[network][end].median,\n                score: Math.round(QUANTILE_AT_VALUE(value[network][end], value[network][end].median) * 100),\n            }\n        })\n        setMetricsData(data)\n    }, [network, end])\n\n    return (\n        <Content>\n            <PageHeader title='Calculator' />\n            <Content>\n                <Row className='mb-5' gutter={16}>\n                    <Col className='flex items-center' span={2}>\n                        Network\n                    </Col>\n                    <Col span={6}>\n                        <Select style={{ width: 200 }} value={network} onSelect={(val) => setNetwork(val)}>\n                            {networkArr.map((n) => (\n                                <Option value={n} key={n}>\n                                    {n}\n                                </Option>\n                            ))}\n                        </Select>\n                    </Col>\n                    <Col className='flex items-center' span={2}>\n                        End\n                    </Col>\n                    <Col span={6}>\n                        <Select style={{ width: 200 }} value={end} onSelect={(val) => setEnd(val)}>\n                            {endArr.map((n) => (\n                                <Option value={n} key={n}>\n                                    {n}\n                                </Option>\n                            ))}\n                        </Select>\n                    </Col>\n                </Row>\n                <Divider />\n                <div className='mb-5 underline text-2xl'>\n                    <a href='https://www.desmos.com/calculator/oqlvmezbze?lang=zh-CN' target='_blank' rel='noreferrer'>\n                        computational formula\n                    </a>\n                </div>\n                <Editor metricsData={metricsData} onScoreChange={onScoreChange} onValueChange={onValueChange} />\n            </Content>\n        </Content>\n    )\n}\n\nexport default withBaseContent(Calculator)\n"],"sourceRoot":""}