(this["webpackJsonpmonitor-demo"]=this["webpackJsonpmonitor-demo"]||[]).push([[4],{598:function(e,t,n){"use strict";n(600);var r=n(601),a=n.n(r),c=n(12);t.a=function(e){var t=e.title;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"text-3xl font-semibold",children:t}),Object(c.jsx)(a.a,{type:"horizontal"})]})}},599:function(e,t,n){"use strict";var r=n(38),a=n(12);t.a=function(e){return function(t){return Object(a.jsx)("div",{className:"flex-1 p-5 overflow-auto",children:Object(a.jsx)(e,Object(r.a)({},t))})}}},698:function(e,t,n){},699:function(e,t,n){e.exports=n(258)},703:function(e,t,n){"use strict";n.r(t);n(600);var r=n(601),a=n.n(r),c=n(38),i=n(76),o=(n(125),n(53)),u=n.n(o),s=(n(698),n(0)),l=n.n(s),d=n(598),b=n(599),j=n(242),m=n(177);!function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),a=/(?:Firefox)/.test(e),c=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||a&&/(?:Tablet)/.test(e),i=/(?:iPhone)/.test(e)&&!c}();function f(e){var t=Object(m.b)(e,.995),n=Object(m.b)(e,.05),r=1e3*Math.floor(t/1e3),a=1e3*Math.ceil(n/1e3),c=10;return"unitless"===e.units&&(r=0,a=Math.ceil(100*n)/100,c=.01),{min:r,max:a,step:c}}n(166);var O=n(101),h=n.n(O),v=(n(264),n(268)),x=n.n(v),p=n(699),g=n.n(p);function y(e,t,n,r,a,c,i){try{var o=e[c](i),u=o.value}catch(s){return void n(s)}o.done?t(u):Promise.resolve(u).then(r,a)}var w=n(169),S=(n(609),n(619)),k=n.n(S);function M(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C={fcp:"first-contentful-paint",act:"api-complete-time",ccp:"custom-contentful-paint"},I=n(12),N=["index"],P=["title","editable","children","dataIndex","record","handleSave"],A=l.a.createContext(null),E=[{title:"metrics",dataIndex:"metrics",key:"metrics",render:function(e){return Object(I.jsx)("div",{children:"".concat(C[e],"\uff08").concat(e,"\uff09")})}},{title:"median(ms)",dataIndex:"median",key:"median",width:"20%",editable:!0},{title:"p10(ms)",dataIndex:"p10",key:"p10",width:"20%",editable:!0},{title:"weight",dataIndex:"weight",key:"weight",width:"20%",editable:!0}];function F(e){e.index;var t=M(e,N),n=k.a.useForm(),r=Object(i.a)(n,1)[0];return Object(I.jsx)(k.a,{form:r,component:!1,children:Object(I.jsx)(A.Provider,{value:r,children:Object(I.jsx)("tr",Object(c.a)({},t))})})}function z(e){var t=e.title,n=e.editable,r=e.children,a=e.dataIndex,o=e.record,u=e.handleSave,l=M(e,P),d=Object(s.useState)(!1),b=Object(i.a)(d,2),j=b[0],m=b[1],f=Object(s.useRef)(null),O=Object(s.useContext)(A);Object(s.useEffect)((function(){j&&f.current.focus()}),[j]);var h=function(){m(!j),O.setFieldsValue(Object(w.a)({},a,o[a]))},v=function(){var e,t=(e=g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.validateFields();case 3:t=e.sent,h(),u(Object(c.a)(Object(c.a)(Object(c.a)({},o),t),l)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function i(e){y(c,r,a,i,o,"next",e)}function o(e){y(c,r,a,i,o,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),p=r;return n&&(p=j?Object(I.jsx)(k.a.Item,{style:{margin:0},name:a,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(I.jsx)(x.a,{ref:f,onPressEnter:v,onBlur:v})}):Object(I.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:h,children:r})),Object(I.jsx)("td",Object(c.a)(Object(c.a)({},l),{},{children:p}))}var V=function(e){var t=e.metricsConfig,n=e.onMetricsChange,r=Object(s.useMemo)((function(){return Object.entries(t).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.a)(Object(c.a)({metrics:n},r),{},{key:n})}))}),[t]),a=Object(s.useMemo)((function(){return E.map((function(e,t){return e.editable?Object(c.a)(Object(c.a)({},e),{},{key:t,onCell:function(r){return{record:r,editable:e.editable,dataIndex:e.dataIndex,title:e.title,index:t,handleSave:function(e){var t=e.key,r=e.weight,a=e.median,c=e.p10;n(Object(w.a)({},t,{weight:r,median:a,p10:c}))}}}}):Object(c.a)(Object(c.a)({},e),{},{key:t})}))}),[n]);return Object(I.jsx)(h.a,{pagination:!1,bordered:!0,rowClassName:function(){return"editable-row"},components:{body:{row:F,cell:z}},columns:a,dataSource:r})},q=n(162);var B=n(193);function D(e){return function(e){if(Array.isArray(e))return Object(q.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(B.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=function(e){var t=e.metricsData,n=void 0===t?[]:t,r=e.onScoreChange,a=e.onValueChange,i=Object(s.useMemo)((function(){var e=Math.max.apply(Math,D(n.map((function(e){return e.metricScoring.weight}))));return n.map((function(t,n){return Object(c.a)(Object(c.a)({},t),{},{weightMax:e,key:n})}))}),[n]),o=Object(s.useMemo)((function(){return[{title:"metrics",dataIndex:"metrics",key:"metrics",render:function(e,t){return Object(I.jsx)("div",{children:"".concat(C[t.name],"\uff08").concat(t.name,"\uff09")})}},{title:"Value",dataIndex:"value",key:"value",render:function(e,t){var n=t.name,r=t.metricScoring,c=t.value,i=f(r),o=i.min,u=i.max,s=i.step;return Object(I.jsxs)("div",{className:"flex flex-col",children:[Object(I.jsx)("input",{type:"range",min:o,value:c,max:u,step:s,className:"",onInput:function(e){var t;return a(n,null===(t=e.target)||void 0===t?void 0:t.valueAsNumber)}}),Object(I.jsx)("output",{className:"text-right",children:"".concat(c.toLocaleString(),"ms")})]})}},{title:"Metric Score",dataIndex:"score",key:"score",render:function(e,t){var n=t.name,a=t.metricScoring,c=t.score,i=t.weightMax;return Object(I.jsxs)("div",{className:"flex flex-col items-end",children:[Object(I.jsx)("input",{type:"range",style:{width:"".concat(a.weight/i*100,"%")},value:c,onInput:function(e){var t;return r(n,null===(t=e.target)||void 0===t?void 0:t.valueAsNumber)}}),Object(I.jsx)("output",{className:"text-right",children:c})]})}},{title:"Weighting",dataIndex:"weight",key:"weight",align:"right",render:function(e,t){var n=t.metricScoring;return Object(I.jsxs)("span",{children:[100*n.weight,"%"]})}}]}),[r,a]);return Object(I.jsx)(h.a,{pagination:!1,columns:o,dataSource:i})},R=u.a.Content;t.default=Object(b.a)((function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(s.useState)(j.a),u=Object(i.a)(o,2),l=u[0],b=u[1],O=Object(s.useCallback)((function(e,t){var a=n.map((function(n){return n.name===e?Object(c.a)(Object(c.a)({},n),{},{value:t,score:Math.round(100*Object(m.a)(n.metricScoring,t))}):n}));r(a)}),[n]),h=Object(s.useCallback)((function(e,t){var a=n.map((function(n){if(n.name===e){var r=f(n.metricScoring),a=r.min,i=r.max,o=Object(m.b)(n.metricScoring,t/100);return o=Math.max(Math.min(o,i),a),Object(c.a)(Object(c.a)({},n),{},{value:Math.round(o),score:t})}return n}));r(a)}),[n]),v=Object(s.useCallback)((function(e){b((function(t){return Object(c.a)(Object(c.a)({},t),e)}))}),[]);return Object(s.useEffect)((function(){var e=Object.entries(l).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return{name:n,metricScoring:r,value:r.median,score:Math.round(100*Object(m.a)(r,r.median))}}));r(e)}),[l]),Object(I.jsxs)(R,{children:[Object(I.jsx)(d.a,{title:"Calculator"}),Object(I.jsxs)(R,{children:[Object(I.jsx)("div",{className:"mb-5 underline text-2xl",children:Object(I.jsx)("a",{href:"https://www.desmos.com/calculator/oqlvmezbze?lang=zh-CN",target:"_blank",rel:"noreferrer",children:"computational formula"})}),Object(I.jsx)(V,{metricsConfig:l,onMetricsChange:v}),Object(I.jsx)(a.a,{}),Object(I.jsx)(J,{metricsData:n,onScoreChange:h,onValueChange:O})]})]})}))}}]);
//# sourceMappingURL=p_calculator.83699d42.chunk.js.map