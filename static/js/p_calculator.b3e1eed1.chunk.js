(this["webpackJsonpmonitor-demo"]=this["webpackJsonpmonitor-demo"]||[]).push([[4],{597:function(e,t,n){"use strict";n(599);var a=n(600),r=n.n(a),c=n(12);t.a=function(e){var t=e.title;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"text-3xl font-semibold",children:t}),Object(c.jsx)(r.a,{type:"horizontal"})]})}},598:function(e,t,n){"use strict";var a=n(38),r=n(12);t.a=function(e){return function(t){return Object(r.jsx)("div",{className:"flex-1 p-5 overflow-auto",children:Object(r.jsx)(e,Object(a.a)({},t))})}}},697:function(e,t,n){},698:function(e,t,n){e.exports=n(257)},702:function(e,t,n){"use strict";n.r(t);n(599);var a=n(600),r=n.n(a),c=n(38),i=n(76),o=(n(126),n(53)),u=n.n(o),s=(n(697),n(0)),l=n.n(s),d=n(597),b=n(598),j=n(117);function m(e,t){var n=e.median,a=e.podr,r=e.p10;a||(a=f(n,r));var c=Math.log(n),i=Math.log(a/n),o=Math.sqrt(1-3*i-Math.sqrt((i-3)*(i-3)-8))/2;return(1-function(e){var t=e<0?-1:1,n=1/(1+.3275911*(e=Math.abs(e)));return t*(1-n*(.254829592+n*(n*(1.421413741+n*(1.061405429*n-1.453152027))-.284496736))*Math.exp(-e*e))}((Math.log(t)-c)/(Math.SQRT2*o)))/2}function h(e,t){var n=e.median,a=e.podr,r=e.p10;a||(a=f(n,r));var c=Math.log(n),i=Math.log(a/n),o=Math.sqrt(1-3*i-Math.sqrt((i-3)*(i-3)-8))/2;return Math.exp(c+o*Math.SQRT2*function(e){var t=e<0?-1:1,n=Math.log(1-e*e),a=2/(.147*Math.PI)+n/2,r=Math.sqrt(a*a-n/.147);return t*Math.sqrt(r-a)}(1-2*t))}function f(e,t){var n=Math.log(e),a=Math.abs(Math.log(t)-n)/(.9061938024368232*Math.SQRT2),r=-3*a-Math.sqrt(4+a*a);return Math.exp(n+a/2*r)}!function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,a=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),c=/(?:iPad|PlayBook)/.test(e)||a&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),i=/(?:iPhone)/.test(e)&&!c}();function v(e){var t=h(e,.995),n=h(e,.05),a=1e3*Math.floor(t/1e3),r=1e3*Math.ceil(n/1e3),c=10;return"unitless"===e.units&&(a=0,r=Math.ceil(100*n)/100,c=.01),{min:a,max:r,step:c}}n(167);var O=n(101),x=n.n(O),p=(n(263),n(267)),g=n.n(p),M=n(698),y=n.n(M);function w(e,t,n,a,r,c,i){try{var o=e[c](i),u=o.value}catch(s){return void n(s)}o.done?t(u):Promise.resolve(u).then(a,r)}var S=n(170),k=(n(608),n(618)),C=n.n(k);function I(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var N={fcp:"first-contentful-paint",act:"api-complete-time",ccp:"custom-contentful-paint"},P=n(12),q=["index"],A=["title","editable","children","dataIndex","record","handleSave"],E=l.a.createContext(null),F=[{title:"metrics",dataIndex:"metrics",key:"metrics",render:function(e){return Object(P.jsx)("div",{children:"".concat(N[e],"\uff08").concat(e,"\uff09")})}},{title:"median(ms)",dataIndex:"median",key:"median",width:"20%",editable:!0},{title:"p10(ms)",dataIndex:"p10",key:"p10",width:"20%",editable:!0},{title:"weight",dataIndex:"weight",key:"weight",width:"20%",editable:!0}];function R(e){e.index;var t=I(e,q),n=C.a.useForm(),a=Object(i.a)(n,1)[0];return Object(P.jsx)(C.a,{form:a,component:!1,children:Object(P.jsx)(E.Provider,{value:a,children:Object(P.jsx)("tr",Object(c.a)({},t))})})}function T(e){var t=e.title,n=e.editable,a=e.children,r=e.dataIndex,o=e.record,u=e.handleSave,l=I(e,A),d=Object(s.useState)(!1),b=Object(i.a)(d,2),j=b[0],m=b[1],h=Object(s.useRef)(null),f=Object(s.useContext)(E);Object(s.useEffect)((function(){j&&h.current.focus()}),[j]);var v=function(){m(!j),f.setFieldsValue(Object(S.a)({},r,o[r]))},O=function(){var e,t=(e=y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.validateFields();case 3:t=e.sent,v(),u(Object(c.a)(Object(c.a)(Object(c.a)({},o),t),l)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function i(e){w(c,a,r,i,o,"next",e)}function o(e){w(c,a,r,i,o,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),x=a;return n&&(x=j?Object(P.jsx)(C.a.Item,{style:{margin:0},name:r,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(P.jsx)(g.a,{ref:h,onPressEnter:O,onBlur:O})}):Object(P.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:v,children:a})),Object(P.jsx)("td",Object(c.a)(Object(c.a)({},l),{},{children:x}))}var z=function(e){var t=e.metricsConfig,n=e.onMetricsChange,a=Object(s.useMemo)((function(){return Object.entries(t).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.a)(Object(c.a)({metrics:n},a),{},{key:n})}))}),[t]),r=Object(s.useMemo)((function(){return F.map((function(e,t){return e.editable?Object(c.a)(Object(c.a)({},e),{},{key:t,onCell:function(a){return{record:a,editable:e.editable,dataIndex:e.dataIndex,title:e.title,index:t,handleSave:function(e){var t=e.key,a=e.weight,r=e.median,c=e.p10;n(Object(S.a)({},t,{weight:a,median:r,p10:c}))}}}}):Object(c.a)(Object(c.a)({},e),{},{key:t})}))}),[n]);return Object(P.jsx)(x.a,{pagination:!1,bordered:!0,rowClassName:function(){return"editable-row"},components:{body:{row:R,cell:T}},columns:r,dataSource:a})},V=n(163);var Q=n(193);function B(e){return function(e){if(Array.isArray(e))return Object(V.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(Q.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e){var t=e.metricsData,n=void 0===t?[]:t,a=e.onScoreChange,r=e.onValueChange,i=Object(s.useMemo)((function(){var e=Math.max.apply(Math,B(n.map((function(e){return e.metricScoring.weight}))));return n.map((function(t,n){return Object(c.a)(Object(c.a)({},t),{},{weightMax:e,key:n})}))}),[n]),o=Object(s.useMemo)((function(){return[{title:"metrics",dataIndex:"metrics",key:"metrics",render:function(e,t){return Object(P.jsx)("div",{children:"".concat(N[t.name],"\uff08").concat(t.name,"\uff09")})}},{title:"Value",dataIndex:"value",key:"value",render:function(e,t){var n=t.name,a=t.metricScoring,c=t.value,i=v(a),o=i.min,u=i.max,s=i.step;return Object(P.jsxs)("div",{className:"flex flex-col",children:[Object(P.jsx)("input",{type:"range",min:o,value:c,max:u,step:s,className:"",onInput:function(e){var t;return r(n,null===(t=e.target)||void 0===t?void 0:t.valueAsNumber)}}),Object(P.jsx)("output",{className:"text-right",children:"".concat(c.toLocaleString(),"ms")})]})}},{title:"Metric Score",dataIndex:"score",key:"score",render:function(e,t){var n=t.name,r=t.metricScoring,c=t.score,i=t.weightMax;return Object(P.jsxs)("div",{className:"flex flex-col items-end",children:[Object(P.jsx)("input",{type:"range",style:{width:"".concat(r.weight/i*100,"%")},value:c,onInput:function(e){var t;return a(n,null===(t=e.target)||void 0===t?void 0:t.valueAsNumber)}}),Object(P.jsx)("output",{className:"text-right",children:c})]})}},{title:"Weighting",dataIndex:"weight",key:"weight",align:"right",render:function(e,t){var n=t.metricScoring;return Object(P.jsxs)("span",{children:[100*n.weight,"%"]})}}]}),[a,r]);return Object(P.jsx)(x.a,{pagination:!1,columns:o,dataSource:i})},J=u.a.Content;t.default=Object(b.a)((function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(s.useState)(j.a),u=Object(i.a)(o,2),l=u[0],b=u[1],f=Object(s.useCallback)((function(e,t){var r=n.map((function(n){return n.name===e?Object(c.a)(Object(c.a)({},n),{},{value:t,score:Math.round(100*m(n.metricScoring,t))}):n}));a(r)}),[n]),O=Object(s.useCallback)((function(e,t){var r=n.map((function(n){if(n.name===e){var a=v(n.metricScoring),r=a.min,i=a.max,o=h(n.metricScoring,t/100);return o=Math.max(Math.min(o,i),r),Object(c.a)(Object(c.a)({},n),{},{value:Math.round(o),score:t})}return n}));a(r)}),[n]),x=Object(s.useCallback)((function(e){b((function(t){return Object(c.a)(Object(c.a)({},t),e)}))}),[]);return Object(s.useEffect)((function(){var e=Object.entries(l).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return{name:n,metricScoring:a,value:a.median,score:Math.round(100*m(a,a.median))}}));a(e)}),[l]),Object(P.jsxs)(J,{children:[Object(P.jsx)(d.a,{title:"Calculator"}),Object(P.jsxs)(J,{children:[Object(P.jsx)("div",{className:"mb-5 underline text-2xl",children:Object(P.jsx)("a",{href:"https://www.desmos.com/calculator/oqlvmezbze?lang=zh-CN",target:"_blank",rel:"noreferrer",children:"computational formula"})}),Object(P.jsx)(z,{metricsConfig:l,onMetricsChange:x}),Object(P.jsx)(r.a,{}),Object(P.jsx)(D,{metricsData:n,onScoreChange:O,onValueChange:f})]})]})}))}}]);
//# sourceMappingURL=p_calculator.b3e1eed1.chunk.js.map